@model List<ToDoViewModel>
@{
    int year = 2024; // Set the year for the calendars
}

<style>
    table, th, td {
        border: 1px solid black;
    }
</style>

@for (int month = 1; month <= 12; month++)
{
    <h1 class="text-center">@(new DateTime(year, month, 1).ToString("MMMM"))</h1>
    <table style="width:100%">
        @{
            int daysInMonth = DateTime.DaysInMonth(year, month);
            int dayOfWeek = (int)new DateTime(year, month, 1).DayOfWeek;
            int count = 0;
        }
        @for (int i = 0; i < 6; i++)
        {
            <tr>
                @for (int j = 0; j < 7; j++)
                {
                    if (i == 0 && j < dayOfWeek)
                    {
                        <td></td>
                    }
                    else if (count < daysInMonth)
                    {
                        count++;
                        var date = new DateTime(year, month, count); // Non-nullable DateTime
                        <td>
                            @count
                            @foreach (var viewModel in Model)
                            {
                                foreach (var task in viewModel.Tasks)
                                {
                                    // Ensure you are checking against a non-nullable DateTime here
                                    if (task.DueDate.HasValue && task.DueDate.Value.Date == date.Date)
                                    {
                                        <div>@task.Description</div>
                                    }
                                }
                            }
                        </td>
                    }
                    else
                    {
                        <td></td>
                    }
                }
            </tr>
        }
    </table>
}

<a asp-controller="home" asp-action="index" class="btn btn-primary">Go back home</a>
